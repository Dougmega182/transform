(()=>{var e={};e.id=308,e.ids=[308],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},9632:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=a(70260),t=a(28203),i=a(25155),n=a.n(i),l=a(67292),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(s,d);let o=["",{children:["swms",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8784)),"E:\\signonsite\\transform\\app\\swms\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,19611)),"E:\\signonsite\\transform\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["E:\\signonsite\\transform\\app\\swms\\new\\page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/swms/new/page",pathname:"/swms/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},56779:(e,s,a)=>{Promise.resolve().then(a.bind(a,8784))},79832:(e,s,a)=>{Promise.resolve().then(a.bind(a,90356))},90356:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var r=a(45512),t=a(58009),i=a(79334),n=a(7777),l=a(87021),d=a(25409),o=a(47699),c=a(48859),m=a(97643),u=a(54069),h=a(69193),p=a(65518),x=a(35668),f=a(49656),j=a(18741),v=a(33680),g=a(28531),b=a.n(g),N=a(36516);function y(){let{user:e,loading:s}=(0,n.A)(),a=(0,i.useRouter)(),{toast:g}=(0,p.dj)(),[y,w]=(0,t.useState)("details"),[k,S]=(0,t.useState)([{id:"hazard_1",description:"",controls:"",riskLevel:"medium"}]),[C,R]=(0,t.useState)(null);if(s)return(0,r.jsx)("div",{className:"container flex h-[calc(100vh-4rem)] items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-lg font-medium",children:"Loading..."}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please wait"})]})});if(!e)return null;let z=(e,s,a)=>{S(k.map(r=>r.id===e?{...r,[s]:a}:r))},M=e=>{k.length>1?S(k.filter(s=>s.id!==e)):g({title:"Cannot remove hazard",description:"You must have at least one hazard in your SWMS",variant:"destructive"})};return(0,r.jsxs)("div",{className:"container py-10",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)(l.$,{variant:"ghost",asChild:!0,className:"mb-4",children:(0,r.jsxs)(b(),{href:"/swms",children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Back to SWMS"]})}),(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Create New SWMS"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Create a new Safe Work Method Statement"})]}),(0,r.jsxs)(h.tU,{value:y,onValueChange:w,className:"space-y-4",children:[(0,r.jsxs)(h.j7,{children:[(0,r.jsx)(h.Xi,{value:"details",children:"Details"}),(0,r.jsx)(h.Xi,{value:"hazards",children:"Hazards & Controls"}),(0,r.jsx)(h.Xi,{value:"signature",children:"Signature"})]}),(0,r.jsx)(h.av,{value:"details",className:"space-y-4",children:(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"SWMS Details"}),(0,r.jsx)(m.BT,{children:"Basic information about the work and location"})]}),(0,r.jsxs)(m.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"title",children:"Work Activity Title"}),(0,r.jsx)(d.p,{id:"title",placeholder:"e.g., Excavation Work"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"location",children:"Project/Location"}),(0,r.jsx)(d.p,{id:"location",placeholder:"Project name or site location"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"description",children:"Work Description"}),(0,r.jsx)(c.T,{id:"description",placeholder:"Describe the work to be performed",rows:4})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"company",children:"Company Name"}),(0,r.jsx)(d.p,{id:"company",placeholder:"Your company name"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"supervisor",children:"Supervisor"}),(0,r.jsx)(d.p,{id:"supervisor",placeholder:"Name of supervisor"})]})]})]}),(0,r.jsx)(m.wL,{children:(0,r.jsx)(l.$,{onClick:()=>w("hazards"),children:"Continue to Hazards & Controls"})})]})}),(0,r.jsx)(h.av,{value:"hazards",className:"space-y-4",children:(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Hazards & Controls"}),(0,r.jsx)(m.BT,{children:"Identify hazards and control measures"})]}),(0,r.jsxs)(m.Wu,{className:"space-y-6",children:[k.map((e,s)=>(0,r.jsxs)("div",{className:"space-y-4 rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium",children:["Hazard ",s+1]}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>M(e.id),disabled:1===k.length,children:(0,r.jsx)(f.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:`hazard-desc-${e.id}`,children:"Hazard Description"}),(0,r.jsx)(c.T,{id:`hazard-desc-${e.id}`,value:e.description,onChange:s=>z(e.id,"description",s.target.value),placeholder:"Describe the hazard...",rows:2})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:`hazard-controls-${e.id}`,children:"Control Measures"}),(0,r.jsx)(c.T,{id:`hazard-controls-${e.id}`,value:e.controls,onChange:s=>z(e.id,"controls",s.target.value),placeholder:"List control measures to mitigate this hazard...",rows:3})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:`risk-level-${e.id}`,children:"Risk Level"}),(0,r.jsxs)(u.l6,{value:e.riskLevel,onValueChange:s=>z(e.id,"riskLevel",s),children:[(0,r.jsx)(u.bq,{id:`risk-level-${e.id}`,children:(0,r.jsx)(u.yv,{placeholder:"Select risk level"})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"low",children:"Low"}),(0,r.jsx)(u.eb,{value:"medium",children:"Medium"}),(0,r.jsx)(u.eb,{value:"high",children:"High"}),(0,r.jsx)(u.eb,{value:"extreme",children:"Extreme"})]})]})]})]},e.id)),(0,r.jsxs)(l.$,{variant:"outline",onClick:()=>{let e={id:`hazard_${k.length+1}`,description:"",controls:"",riskLevel:"medium"};S([...k,e])},className:"w-full",children:[(0,r.jsx)(j.A,{className:"mr-2 h-4 w-4"})," Add Hazard"]})]}),(0,r.jsxs)(m.wL,{className:"flex justify-between",children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>w("details"),children:"Back to Details"}),(0,r.jsx)(l.$,{onClick:()=>w("signature"),children:"Continue to Signature"})]})]})}),(0,r.jsx)(h.av,{value:"signature",className:"space-y-4",children:(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:"Sign SWMS"}),(0,r.jsx)(m.BT,{children:"Review and sign the Safe Work Method Statement"})]}),(0,r.jsxs)(m.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,r.jsx)("h3",{className:"mb-4 text-lg font-medium",children:"Declaration"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"I have read and understood this Safe Work Method Statement (SWMS). I agree to comply with the control measures outlined in this SWMS. I understand that I must stop work immediately and notify my supervisor if the SWMS cannot be followed or if new hazards are identified."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"signature",children:"Signature"}),(0,r.jsx)("div",{className:"rounded-lg border p-4",children:(0,r.jsx)(N.A,{onSave:R})}),C&&(0,r.jsx)("p",{className:"text-sm text-green-600",children:"Signature captured successfully"})]})]}),(0,r.jsxs)(m.wL,{className:"flex justify-between",children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>w("hazards"),children:"Back to Hazards"}),(0,r.jsxs)(l.$,{onClick:()=>{if(!C){g({title:"Signature required",description:"Please sign the SWMS before submitting",variant:"destructive"});return}g({title:"SWMS submitted",description:"Your Safe Work Method Statement has been submitted for approval"}),a.push("/swms")},children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"})," Submit SWMS"]})]})]})})]})]})}},36516:(e,s,a)=>{"use strict";a.d(s,{A:()=>o});var r=a(45512),t=a(58009),i=a(87021);let n=(0,a(41680).A)("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);var l=a(33680),d=a(77350);function o({onSave:e}){let s=(0,t.useRef)(null),[a,o]=(0,t.useState)(!1),[c,m]=(0,t.useState)(null),u=(0,d.useMobile)(),h=e=>{if(!c)return;o(!0),c.beginPath();let{offsetX:s,offsetY:a}=f(e);c.moveTo(s,a)},p=e=>{if(!a||!c)return;let{offsetX:s,offsetY:r}=f(e);c.lineTo(s,r),c.stroke()},x=()=>{c&&(o(!1),c.closePath())},f=e=>{let a,r;let t=s.current;if(!t)return{offsetX:0,offsetY:0};if(j(e)){let s=t.getBoundingClientRect(),i=e.touches[0]||e.changedTouches[0];a=i.clientX-s.left,r=i.clientY-s.top}else a=e.nativeEvent.offsetX,r=e.nativeEvent.offsetY;return{offsetX:a,offsetY:r}},j=e=>"touches"in e;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"border rounded-md bg-white",children:(0,r.jsx)("canvas",{ref:s,className:"w-full touch-none cursor-crosshair",onMouseDown:h,onMouseMove:p,onMouseUp:x,onMouseLeave:x,onTouchStart:h,onTouchMove:p,onTouchEnd:x})}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{c&&s.current&&(c.clearRect(0,0,s.current.width,s.current.height),e(null))},children:[(0,r.jsx)(n,{className:"h-4 w-4 mr-2"})," Clear"]}),(0,r.jsxs)(i.$,{size:"sm",onClick:()=>{s.current&&e(s.current.toDataURL("image/png"))},children:[(0,r.jsx)(l.A,{className:"h-4 w-4 mr-2"})," Save Signature"]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:u?"Use your finger to sign above":"Use your mouse to sign above"})]})}},97643:(e,s,a)=>{"use strict";a.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>l,wL:()=>m});var r=a(45512),t=a(58009),i=a(59462);let n=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let l=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let d=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let o=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let c=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent";let m=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},47699:(e,s,a)=>{"use strict";a.d(s,{J:()=>o});var r=a(45512),t=a(58009),i=a(92405),n=a(21643),l=a(59462);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.b,{ref:a,className:(0,l.cn)(d(),e),...s}));o.displayName=i.b.displayName},54069:(e,s,a)=>{"use strict";a.d(s,{bq:()=>u,eb:()=>f,gC:()=>x,l6:()=>c,yv:()=>m});var r=a(45512),t=a(58009),i=a(87537),n=a(98755),l=a(28638),d=a(24849),o=a(59462);let c=i.bL;i.YJ;let m=i.WT,u=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(i.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,(0,r.jsx)(i.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=i.l9.displayName;let h=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}));h.displayName=i.PP.displayName;let p=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));p.displayName=i.wn.displayName;let x=t.forwardRef(({className:e,children:s,position:a="popper",...t},n)=>(0,r.jsx)(i.ZL,{children:(0,r.jsxs)(i.UC,{ref:n,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...t,children:[(0,r.jsx)(h,{}),(0,r.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(p,{})]})}));x.displayName=i.UC.displayName,t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.JU,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=i.JU.displayName;let f=t.forwardRef(({className:e,children:s,...a},t)=>(0,r.jsxs)(i.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(i.p4,{children:s})]}));f.displayName=i.q7.displayName,t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=i.wv.displayName},69193:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>o,av:()=>c,j7:()=>d,tU:()=>l});var r=a(45512),t=a(58009),i=a(55613),n=a(59462);let l=i.bL,d=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.B8,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));d.displayName=i.B8.displayName;let o=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.l9,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=i.l9.displayName;let c=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)(i.UC,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));c.displayName=i.UC.displayName},48859:(e,s,a)=>{"use strict";a.d(s,{T:()=>n});var r=a(45512),t=a(58009),i=a(59462);let n=t.forwardRef(({className:e,...s},a)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));n.displayName="Textarea"},8784:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\signonsite\\\\transform\\\\app\\\\swms\\\\new\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\signonsite\\transform\\app\\swms\\new\\page.tsx","default")}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[638,178,780,739],()=>a(9632));module.exports=r})();