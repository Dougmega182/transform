(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[743],{9583:(e,t,a)=>{Promise.resolve().then(a.bind(a,8648))},8648:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(5155),s=a(2115),i=a(6046),n=a(1289),o=a(4085),d=a(5007),l=a(1641),c=a(9134),u=a(4081),f=a(4836);let h=(0,a(7401).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);function p(){let{user:e}=(0,n.A)();(0,i.useRouter)();let t=(0,i.useParams)(),{toast:a}=(0,c.dj)(),[p,m]=(0,s.useState)(null),[v,g]=(0,s.useState)(!0),[y,x]=(0,s.useState)("swms");return((0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/job-sites/".concat(t.id));if(e.ok){let t=await e.json();m(t.jobSite)}}catch(e){console.error("Error fetching job site:",e),a({variant:"destructive",title:"Error",description:"Failed to load job site information"})}finally{g(!1)}};t.id&&e()},[t.id,a]),v)?(0,r.jsx)("div",{children:"Loading job site information..."}):p?(0,r.jsxs)("div",{className:"container py-10",children:[(0,r.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:p.name}),(0,r.jsx)("p",{className:"mb-8 text-muted-foreground",children:p.address}),(0,r.jsxs)(l.tU,{value:y,onValueChange:x,className:"space-y-4",children:[(0,r.jsxs)(l.j7,{children:[(0,r.jsx)(l.Xi,{value:"swms",children:"SWMS"}),(0,r.jsx)(l.Xi,{value:"induction",children:"Site Induction"}),(0,r.jsx)(l.Xi,{value:"signin",children:"Sign In"})]}),(0,r.jsx)(l.av,{value:"swms",children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Safe Work Method Statement"}),(0,r.jsx)(d.BT,{children:"Review and sign off on the SWMS for this job site"})]}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)(o.$,{className:"mt-4",children:[(0,r.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Review and Sign SWMS"]})})]})}),(0,r.jsx)(l.av,{value:"induction",children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Site Induction"}),(0,r.jsx)(d.BT,{children:"Complete the required site induction"})]}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)(o.$,{className:"mt-4",children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Start Site Induction"]})})]})}),(0,r.jsx)(l.av,{value:"signin",children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Sign In to Job Site"}),(0,r.jsx)(d.BT,{children:"Complete the sign-in process for this job site"})]}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)(o.$,{className:"mt-4",children:[(0,r.jsx)(h,{className:"mr-2 h-4 w-4"})," Sign In to Site"]})})]})})]})]}):(0,r.jsx)("div",{children:"Job site not found"})}},4085:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var r=a(5155),s=a(2115),i=a(2317),n=a(1027),o=a(9602);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:l=!1,...c}=e,u=l?i.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(d({variant:s,size:n,className:a})),ref:t,...c})});l.displayName="Button"},5007:(e,t,a)=>{"use strict";a.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>o,wL:()=>u});var r=a(5155),s=a(2115),i=a(9602);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});l.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},1641:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>l,av:()=>c,j7:()=>d,tU:()=>o});var r=a(5155),s=a(2115),i=a(8629),n=a(9602);let o=i.bL,d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});d.displayName=i.B8.displayName;let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});l.displayName=i.l9.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});c.displayName=i.UC.displayName},9134:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f});var r=a(2115);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(l);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},1795:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>d,c:()=>o});var r=a(5155),s=a(2115),i=a(6046),n=a(9134);let o=(0,s.createContext)({user:null,loading:!0,signIn:async()=>{},signUp:async()=>{},signOut:()=>{}});function d(e){let{children:t}=e,[a,d]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),u=(0,i.useRouter)(),{toast:f}=(0,n.dj)();(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let t=await e.json();t.user&&d(t.user)}}catch(e){console.error("Authentication error:",e)}finally{c(!1)}})()},[]);let h=async(e,t)=>{try{c(!0);let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to sign in")}let r=await a.json();d(r.user),f({title:"Signed in successfully",description:"Welcome back, ".concat(r.user.name,"!")}),u.push("/dashboard")}catch(e){console.error("Sign in error:",e),f({variant:"destructive",title:"Sign in failed",description:e instanceof Error?e.message:"Please check your credentials and try again."})}finally{c(!1)}},p=async(e,t,a,r,s)=>{try{c(!0);let i=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:a,company:r,position:s})});if(!i.ok){let e=await i.json();throw Error(e.message||"Failed to sign up")}let n=await i.json();d(n.user),f({title:"Account created successfully",description:"Welcome, ".concat(e,"!")}),u.push("/dashboard")}catch(e){console.error("Sign up error:",e),f({variant:"destructive",title:"Sign up failed",description:e instanceof Error?e.message:"Please try again with different credentials."})}finally{c(!1)}},m=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),d(null),u.push("/"),f({title:"Signed out successfully"})}catch(e){console.error("Sign out error:",e)}};return(0,r.jsx)(o.Provider,{value:{user:a,loading:l,signIn:h,signUp:p,signOut:m},children:t})}},1289:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(2115),s=a(1795);function i(){let e=(0,r.useContext)(s.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var r=a(3463),s=a(9795);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},4836:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7401).A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},4081:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7401).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8629:(e,t,a)=>{"use strict";a.d(t,{B8:()=>R,UC:()=>I,bL:()=>C,l9:()=>E});var r=a(2115),s=a(3610),i=a(8166),n=a(7357),o=a(7028),d=a(3360),l=a(4256),c=a(1488),u=a(7668),f=a(5155),h="Tabs",[p,m]=(0,i.A)(h,[n.RG]),v=(0,n.RG)(),[g,y]=p(h),x=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,onValueChange:s,defaultValue:i,orientation:n="horizontal",dir:o,activationMode:h="automatic",...p}=e,m=(0,l.jH)(o),[v,y]=(0,c.i)({prop:r,onChange:s,defaultProp:i});return(0,f.jsx)(g,{scope:a,baseId:(0,u.B)(),value:v,onValueChange:y,orientation:n,dir:m,activationMode:h,children:(0,f.jsx)(d.sG.div,{dir:m,"data-orientation":n,...p,ref:t})})});x.displayName=h;var b="TabsList",j=r.forwardRef((e,t)=>{let{__scopeTabs:a,loop:r=!0,...s}=e,i=y(b,a),o=v(a);return(0,f.jsx)(n.bL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:(0,f.jsx)(d.sG.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});j.displayName=b;var S="TabsTrigger",w=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,disabled:i=!1,...o}=e,l=y(S,a),c=v(a),u=k(l.baseId,r),h=A(l.baseId,r),p=r===l.value;return(0,f.jsx)(n.q7,{asChild:!0,...c,focusable:!i,active:p,children:(0,f.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...o,ref:t,onMouseDown:(0,s.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(r)}),onKeyDown:(0,s.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(r)}),onFocus:(0,s.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;p||i||!e||l.onValueChange(r)})})})});w.displayName=S;var N="TabsContent",T=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,forceMount:i,children:n,...l}=e,c=y(N,a),u=k(c.baseId,s),h=A(c.baseId,s),p=s===c.value,m=r.useRef(p);return r.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,f.jsx)(o.C,{present:i||p,children:a=>{let{present:r}=a;return(0,f.jsx)(d.sG.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:h,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&n})}})});function k(e,t){return"".concat(e,"-trigger-").concat(t)}function A(e,t){return"".concat(e,"-content-").concat(t)}T.displayName=N;var C=x,R=j,E=w,I=T}},e=>{var t=t=>e(e.s=t);e.O(0,[882,934,441,517,358],()=>t(9583)),_N_E=e.O()}]);