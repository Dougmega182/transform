(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{5104:(e,s,t)=>{Promise.resolve().then(t.bind(t,709))},709:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var i=t(5155),n=t(2115),r=t(6046),c=t(1289),d=t(4085),l=t(5007),a=t(2079),h=t(750),x=t(3473),j=t(2823),o=t(4836),m=t(4858),u=t(2598),f=t(8501),N=t(5686),y=t(8173),A=t.n(y);function b(){let{user:e,loading:s}=(0,c.A)(),t=(0,r.useRouter)(),[y,b]=(0,n.useState)([]),[p,w]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{s||e||t.push("/auth/login")},[e,s,t]),(0,n.useEffect)(()=>{let s=async()=>{try{let e=await fetch("/api/job-sites");if(e.ok){let s=await e.json();b(s.jobSites)}}catch(e){console.error("Error fetching job sites:",e)}finally{w(!1)}};e&&s()},[e]),s||p)?(0,i.jsx)("div",{className:"container flex h-[calc(100vh-4rem)] items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h2",{className:"text-lg font-medium",children:"Loading..."}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please wait while we load your job sites"})]})}):e?(0,i.jsxs)("div",{className:"container py-10",children:[(0,i.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:"Job Sites"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Manage your construction job sites"})]}),(0,i.jsx)(d.$,{asChild:!0,children:(0,i.jsxs)(A(),{href:"/job-sites/new",children:[(0,i.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add Job Site"]})})]}),(0,i.jsxs)(l.Zp,{children:[(0,i.jsxs)(l.aR,{children:[(0,i.jsx)(l.ZB,{children:"All Job Sites"}),(0,i.jsx)(l.BT,{children:"View and manage all your job sites"})]}),(0,i.jsx)(l.Wu,{children:0===y.length?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-10",children:[(0,i.jsx)("p",{className:"mb-4 text-muted-foreground",children:"No job sites found"}),(0,i.jsx)(d.$,{asChild:!0,children:(0,i.jsxs)(A(),{href:"/job-sites/new",children:[(0,i.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add Your First Job Site"]})})]}):(0,i.jsxs)(a.XI,{children:[(0,i.jsx)(a.A0,{children:(0,i.jsxs)(a.Hj,{children:[(0,i.jsx)(a.nd,{children:"Name"}),(0,i.jsx)(a.nd,{children:"Address"}),(0,i.jsx)(a.nd,{children:"Active Workers"}),(0,i.jsx)(a.nd,{children:"Inductions"}),(0,i.jsx)(a.nd,{className:"text-right",children:"Actions"})]})}),(0,i.jsx)(a.BF,{children:y.map(e=>(0,i.jsxs)(a.Hj,{children:[(0,i.jsx)(a.nA,{className:"font-medium",children:e.name}),(0,i.jsx)(a.nA,{children:e.address}),(0,i.jsx)(a.nA,{children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(j.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.activeWorkers]})}),(0,i.jsx)(a.nA,{children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(o.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.completedInductions]})}),(0,i.jsx)(a.nA,{className:"text-right",children:(0,i.jsxs)(h.rI,{children:[(0,i.jsx)(h.ty,{asChild:!0,children:(0,i.jsxs)(d.$,{variant:"ghost",size:"icon",children:[(0,i.jsx)(m.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,i.jsxs)(h.SQ,{align:"end",children:[(0,i.jsx)(h._2,{asChild:!0,children:(0,i.jsxs)(A(),{href:"/job-sites/".concat(e.id),children:[(0,i.jsx)(u.A,{className:"mr-2 h-4 w-4"})," View Details"]})}),(0,i.jsx)(h._2,{asChild:!0,children:(0,i.jsxs)(A(),{href:"/job-sites/".concat(e.id,"/attendance"),children:[(0,i.jsx)(j.A,{className:"mr-2 h-4 w-4"})," View Attendance"]})}),(0,i.jsx)(h._2,{asChild:!0,children:(0,i.jsxs)(A(),{href:"/job-sites/".concat(e.id,"/edit"),children:[(0,i.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Edit"]})}),(0,i.jsxs)(h._2,{className:"text-red-600",children:[(0,i.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))})]})})]})]}):null}},4836:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});let i=(0,t(7401).A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},2823:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});let i=(0,t(7401).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[882,173,934,708,247,665,441,517,358],()=>s(5104)),_N_E=e.O()}]);